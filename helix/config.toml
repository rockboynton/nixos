theme = "modified_gruvbox" # modified to make background transparent, that's it

[editor]
mouse = false
true-color = true
line-number = "relative"
rulers = [120]
color-modes = true
text-width = 120
cursorline = true
shell = ["fish", "-c"]
jump-label-alphabet = "asdf;lkjghqweruioptyzxc/.,mbn" # inward rolls of home-row, top-row, and bottom-row on qwerty keyboard
bufferline = "multiple"
completion-trigger-len = 1
completion-timeout = 100
undercurl = true
file-picker.hidden = false
end-of-line-diagnostics = "hint"
rainbow-brackets = true

[editor.inline-diagnostics]
cursor-line = "warning"

[editor.auto-save]
focus-lost = true
after-delay.enable = true
after-delay.timeout = 300

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.statusline]
center = [
  "diagnostics",
  "spacer",
  "workspace-diagnostics"
]
right = [
  "selections",
  "register",
  "position",
  "position-percentage",
  "file-encoding",
]

[editor.statusline.mode]
normal = "NORMAL"
insert = "INSERT"
select = "SELECT"

[editor.lsp]
display-messages = true
display-inlay-hints = true

[editor.whitespace.render]
space = "all"
tab = "all"

[editor.indent-guides]
render = true
skip-levels = 1
character = "â”Š"

# [editor.inline-blame]
# behavior = "cursor-line"
# compute = "background"
# format = "{author}, {date} ({time-ago}) - {message} - {commit}"

[keys.normal]
tab = "move_parent_node_end"
S-tab = "move_parent_node_start"
C-u = ["page_cursor_half_up", "align_view_center"]
C-d = ["page_cursor_half_down", "align_view_center"]
A-y = [":yank-join"]
A-o = "jump_backward"
A-i = "jump_forward"
A-c = "copy_selection_on_prev_line"
"["."[" = "goto_previous_buffer"
"]"."]" = "goto_next_buffer"
"}" = "goto_next_paragraph"
"{" = "goto_prev_paragraph"
X = "extend_line_above"
D = ["move_char_left", "delete_selection"]
H = "jump_view_left"
L = "jump_view_right"
A-f = ":format"
A-r = ":reload-all"
A-R = ":reflow"
A-W = "move_next_sub_word_start"
A-B = "move_prev_sub_word_start"
A-E = "move_next_sub_word_end"
ret = "goto_word"
C-S = "save_selection"

[keys.normal.space]
x = ":buffer-close"
X = ":buffer-close-others"
A-f = "file_picker_in_current_buffer_directory"
A-y = ":clipboard-yank-join"
"." = ":toggle-option file-picker.git-ignore"
n = ":new"
l = ":lsp-restart"
q = ":quit-all"
B = [
  ':sh rm -f /tmp/unique-file',
  ':insert-output yazi %{buffer_name} --chooser-file=/tmp/unique-file',
  ':insert-output echo "\x1b[?1049h\x1b[?2004h" > /dev/tty',
  ':open %sh{cat /tmp/unique-file}',
  ':redraw',
]
i = ":toggle lsp.display-inlay-hints"
t = ":toggle soft-wrap.enable"
# B = "file_browser" # PR 11285
# A-B = "file_browser_in_current_buffer_directory" # PR 11285

[keys.normal.space.g]
# b = "blame_line"
o = ":sh gh browse %{buffer_name}:%{cursor_line}"
u = ":sh gh browse %{buffer_name}:%{cursor_line} --no-browser"
p = "changed_file_picker"
t = [
  ":sh zellij run --floating -x 5% -y 6% --height 88% --width 91% --close-on-exit -- gitui",
  ":reload-all",
]
b = ":pipe-to /home/rboynton/sources/scripts/helix-git-blame"
d.i = ":sh zellij run --floating -x 5% -y 6% --height 88% --width 91% -n 'Git Diff (Inline)' -- git diff"
d.s = ":sh zellij run --floating -x 5% -y 6% --height 88% --width 91% -n 'Git Diff (Split)' -- /home/rboynton/sources/scripts/side-by-side-diff.fish"
# make resolving merge conflicts easier
c = ":sh /home/rboynton/sources/scripts/helix-find-next-conflict"

[keys.normal."'"]
# yazi as a file picker
y = ":sh zellij run --floating -x 5% -y 6% --height 88% --width 91% -n 'Yazi Picker' -- /home/rboynton/.config/fish/scripts/open_in_helix_from_yazi.fish"
r = ":reset-diff-change"
"'" = ":sh zellij action new-pane --floating -x 5% -y 6% --height 88% --width 91%"
s = ":sh zellij run --floating -x 5% -y 6% --height 88% --width 91% -n 'live grep' -- /home/rboynton/sources/scripts/helix-live-grep"

[keys.insert]
S-tab = "move_parent_node_start"
A-left = "move_prev_word_start"
A-right = ["move_next_word_end", "move_char_right"]
A-p = "command_palette"

[keys.select]
tab = "extend_parent_node_end"
S-tab = "extend_parent_node_start"
X = "select_line_above"
A-W = "extend_next_sub_word_start"
A-B = "extend_prev_sub_word_start"
A-E = "extend_next_sub_word_end"
